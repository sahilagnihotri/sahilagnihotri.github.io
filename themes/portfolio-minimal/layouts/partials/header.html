<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ .Title }} | {{ .Site.Title }}</title>
    <link rel="stylesheet" href="{{ "css/style.css" | relURL }}" />
    <link rel="stylesheet" href="{{ "css/fonts.css" | relURL }}" />

    {{ partial "head_custom.html" . }}
  </head>

  <body>
    <nav class="navbar">
      <button class="hamburger" id="hamburger-menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
      <!-- Navigation menu -->
      <ul class="menu" id="nav-menu">
        {{ range .Site.Menus.main }}
        {{ $itemURL := replaceRE "/$" "" .URL }}
        {{ $pageURL := replaceRE "/$" "" $.RelPermalink }}
        {{ $isCurrent := eq $pageURL $itemURL }}
        <li class="{{ if $isCurrent }}active{{ end }}">
          <a href="{{ .URL | relURL }}"{{ if $isCurrent }} aria-current="page"{{ end }}>{{ .Name }}</a>
        </li>
    {{/* Normalize trailing slashes for comparison */}}
  {{ $itemURL := replaceRE "/$" "" .URL }}
  {{ $pageURL := replaceRE "/$" "" $.RelPermalink }}
  {{ $isCurrent := or (eq $pageURL $itemURL) (and (eq $itemURL "") (eq $pageURL "")) }}
        <script>
          console.log("Menu Item: {{ .Name }}");
          console.log("Menu URL: {{ .URL }}");
          console.log("Current Page RelPermalink: {{ $.RelPermalink }}");
          console.log("Current Page Permalink: {{ $.Permalink }}");
        </script>
  {{ end }}
      </ul>
      <div class="social-links">
        <a href="{{ .Site.Params.github }}" target="_blank" rel="noopener noreferrer">
          <i class="fab fa-github"></i>
        </a>
        <a href="{{ .Site.Params.linkedin }}" target="_blank" rel="noopener noreferrer">
          <i class="fab fa-linkedin"></i>
        </a>
        <!--a href="{{ .Site.Params.email }}">
          <i class="fas fa-envelope"></i>
        </a>
      </div-->
    </nav>

    <!-- Mobile navigation script -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const hamburger = document.getElementById('hamburger-menu');
        const navMenu = document.getElementById('nav-menu');
        
        if (hamburger && navMenu) {
            hamburger.addEventListener('click', function() {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });
            
            // Close menu when clicking on a link
            const menuLinks = navMenu.querySelectorAll('a');
            menuLinks.forEach(link => {
                link.addEventListener('click', function() {
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');
                });
            });
        }
    });
    </script>